---
import SectionTitle from "../SectionTitle.astro";
import { Icon } from "astro-icon/components";

interface Skill {
  icon: string;
  name: string;
  color: string;
}

interface SkillCategory {
  title: string;
  titleKey: string;
  icon: string;
  skills: Skill[];
}

const skillCategories: SkillCategory[] = [
  {
    title: "Frontend",
    titleKey: "skills.frontend",
    icon: "mdi:palette",
    skills: [
      { icon: "simple-icons:html5", name: "HTML", color: "text-orange-500" },
      { icon: "simple-icons:css3", name: "CSS", color: "text-blue-500" },
      {
        icon: "simple-icons:javascript",
        name: "JavaScript",
        color: "text-yellow-400",
      },
      { icon: "simple-icons:angular", name: "Angular", color: "text-red-600" },
      {
        icon: "simple-icons:tailwindcss",
        name: "Tailwind",
        color: "text-sky-500",
      },
    ],
  },
  {
    title: "Backend",
    titleKey: "skills.backend",
    icon: "mdi:server",
    skills: [
      { icon: "fontisto:java", name: "Java", color: "text-red-500" },
      { icon: "devicon-plain:csharp", name: "C#", color: "text-purple-600" },
      {
        icon: "simple-icons:springboot",
        name: "Spring Boot",
        color: "text-green-500",
      },
      {
        icon: "simple-icons:hibernate",
        name: "Hibernate",
        color: "text-yellow-600",
      },
      {
        icon: "simple-icons:postgresql",
        name: "PostgreSQL",
        color: "text-blue-400",
      },
    ],
  },
  {
    title: "DevOps & Tools",
    titleKey: "skills.devops",
    icon: "mdi:tools",
    skills: [
      { icon: "simple-icons:git", name: "Git", color: "text-[#F05032]" },
      { icon: "simple-icons:github", name: "GitHub", color: "text-[#0969DA]" },
      { icon: "simple-icons:gitlab", name: "GitLab", color: "text-[#FC6D26]" },
      { icon: "simple-icons:docker", name: "Docker", color: "text-blue-500" },
      {
        icon: "simple-icons:postman",
        name: "Postman",
        color: "text-orange-500",
      },
      {
        icon: "devicon-plain:swagger",
        name: "Swagger",
        color: "text-green-500",
      },
    ],
  },
];
---

<section
  id="skills"
  class="py-12 sm:py-16 md:py-24 px-4 sm:px-6 lg:px-8 animate-on-scroll"
>
  <div class="max-w-6xl mx-auto">
    <SectionTitle titleKey="skills.title">Habilidades Técnicas</SectionTitle>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8">
      {
        skillCategories.map((category, categoryIndex) => (
          <div
            class="skill-category group relative bg-slate-900/40 backdrop-blur-sm border border-shakespeare-800/30 rounded-2xl p-6 hover:border-shakespeare-600/50 transition-all duration-500 hover:shadow-xl hover:shadow-shakespeare-500/10 hover:-translate-y-1"
            style={`animation-delay: ${categoryIndex * 150}ms`}
          >
            {/* Header de categoría */}
            <div class="flex items-center gap-3 mb-6 pb-4 border-b border-shakespeare-800/30">
              <div class="w-10 h-10 rounded-xl bg-shakespeare-500/20 flex items-center justify-center group-hover:bg-shakespeare-500/30 transition-colors duration-300">
                <Icon
                  name={category.icon}
                  class="size-5 text-shakespeare-400"
                />
              </div>
              <h3
                class="text-lg font-bold text-slate-100 group-hover:text-shakespeare-300 transition-colors duration-300"
                data-i18n={category.titleKey}
              >
                {category.title}
              </h3>
            </div>

            {/* Grid de skills */}
            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-3 gap-4">
              {category.skills.map((skill, skillIndex) => (
                <div
                  class="skill-item flex flex-col items-center gap-2 p-2 rounded-xl hover:bg-slate-800/50 transition-all duration-300 cursor-default group/skill"
                  style={`animation-delay: ${categoryIndex * 150 + skillIndex * 50}ms`}
                >
                  <div class="relative">
                    <Icon
                      name={skill.icon}
                      class={`size-8 sm:size-10 text-slate-400 group-hover/skill:${skill.color} transition-all duration-300 group-hover/skill:scale-110 group-hover/skill:-translate-y-1`}
                    />
                    {/* Glow effect on hover */}
                    <div
                      class={`absolute inset-0 ${skill.color} opacity-0 group-hover/skill:opacity-20 blur-xl transition-opacity duration-300`}
                    />
                  </div>
                  <span
                    class={`text-xs font-medium text-slate-400 group-hover/skill:text-slate-200 transition-colors duration-300 text-center`}
                  >
                    {skill.name}
                  </span>
                </div>
              ))}
            </div>

            {/* Decorative corner accent */}
            <div class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-bl from-shakespeare-500/10 to-transparent rounded-tr-2xl pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-500" />
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .skill-category {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
    transform: translateY(20px);
  }

  .skill-item {
    animation: fadeIn 0.4s ease-out forwards;
    opacity: 0;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  /* Hover effect for skill icons - apply color on hover */
  .skill-item:hover .text-slate-400 {
    color: inherit;
  }
</style>
