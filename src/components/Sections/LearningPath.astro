---
import { Icon } from "astro-icon/components";
import { getLangFromUrl, useTranslations } from "../../i18n/translations";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const learningSteps = [
    {
      name: "Apache Kafka",
      icon: "simple-icons:apachekafka",
      y: "20%",
    },
  {
    name: "Redis",
    icon: "devicon-plain:redis",
    y: "60%",
  },
  {
    name: "Kubernetes",
    icon: "simple-icons:kubernetes",
    y: "60%",
  },
  {
    name: "AWS",
    icon: "simple-icons:amazonwebservices",
    y: "20%",
  },
];
---

<section id="learning" class="py-20 px-4 bg-[#050505] overflow-hidden">
  <div class="max-w-5xl mx-auto">
    <div class="text-center mb-16">
      <h2
        class="text-3xl font-bold text-cyan-200 mb-2"
        data-i18n="learning.title"
      >
        {t("learning.title")}
      </h2>
      <p
        class="text-gray-500 text-sm tracking-[0.2em] uppercase font-mono"
        data-i18n="learning.subtitle"
      >
        {t("learning.subtitle")}
      </p>
    </div>

    <div class="relative h-[400px] w-full flex items-center justify-between">
      <svg
        class="absolute inset-0 w-full h-full pointer-events-none"
        preserveAspectRatio="none"
        viewBox="0 0 1000 400"
      >
        <path
          d="M 125 100 L 375 260 L 625 100 L 875 260"
          fill="none"
          stroke="rgba(34, 211, 238, 0.2)"
          stroke-width="3"
          stroke-dasharray="10 10"
        >
          <animate
            attributeName="stroke-dashoffset"
            from="0"
            to="-20"
            dur="1s"
            repeatCount="indefinite"></animate>
        </path>
      </svg>

      {
        learningSteps.map((tech, index) => (
          <div
            class="relative z-10 flex flex-col items-center w-1/4"
            style={`margin-top: ${index % 2 === 0 ? "-140px" : "140px"};`}
          >
            <div class="w-3 h-3 bg-cyan-500 rounded-full shadow-[0_0_15px_rgba(34,211,238,0.8)] mb-4" />

            <div class="group relative bg-[#090d14] border border-white/10 p-6 rounded-2xl flex flex-col items-center w-[160px] transition-all duration-300 hover:border-cyan-500/50 hover:-translate-y-2">
              <div class=" p-3 mb-3">
                <Icon name={tech.icon} class="size-10 text-slate-400" />
              </div>

              <h3 class="text-[11px] font-bold text-slate-400 tracking-wider text-center">
                {tech.name}
              </h3>

              <span class="absolute -top-2 -right-2 bg-cyan-950 text-cyan-400 text-[10px] font-mono px-2 py-0.5 rounded-full border border-cyan-500/30">
                0{index + 1}
              </span>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
