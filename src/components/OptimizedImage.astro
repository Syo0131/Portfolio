---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

// Importar directamente todas las imágenes disponibles
import yamiImg from "../assets/yami.jpg";
import imageImg from "../assets/image.png";
import spendlyImg from "../assets/Spendly.png";

interface Props {
  src: "yami.jpg" | "image.png" | "Spendly.png";
  alt: string;
  class?: string;
  width?: number;
  height?: number;
  loading?: "lazy" | "eager";
}

const {
  src,
  alt,
  class: className,
  width,
  height,
  loading = "lazy",
} = Astro.props;

// Mapeo de nombres a imágenes importadas
const imageMap: Record<string, ImageMetadata> = {
  "yami.jpg": yamiImg,
  "image.png": imageImg,
  "Spendly.png": spendlyImg,
};

const imageSrc = imageMap[src];

if (!imageSrc) {
  throw new Error(
    `Image not found: ${src}. Available images: ${Object.keys(imageMap).join(", ")}`
  );
}
---

<Image
  src={imageSrc}
  alt={alt}
  width={width || imageSrc.width}
  height={height || imageSrc.height}
  loading={loading}
  class={className}
  format="webp"
  quality={85}
/>
