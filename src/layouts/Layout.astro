---
import Analytics from "@vercel/analytics/astro";
import SpeedInsights from "@vercel/speed-insights/astro";

interface Props {
  title?: string;
  description?: string;
  image?: string;
  type?: string;
}

const {
  title = "Daybel Diaz - Ingeniero de Software | Full Stack Developer",
  description = "Ingeniero de software especializado en Java, Spring Boot y desarrollo Full Stack. +2 años de experiencia creando soluciones escalables desde la lógica de negocio hasta la integración final.",
  image = "/linkedin2.jpg",
  type = "website",
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const ogImage = new URL(image, Astro.site);
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta name="author" content="Daybel Diaz" />
    <meta name="keywords" content="Daybel Diaz, Ingeniero de Software, Full Stack Developer, Java Developer, Spring Boot, React, PostgreSQL, República Dominicana, Software Engineer, Backend Developer, Frontend Developer" />
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/profile.jpeg" />
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={type} />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Daybel Diaz - Ingeniero de Software" />
    <meta property="og:site_name" content="Daybel Diaz - Portfolio" />
    <meta property="og:locale" content="es_DO" />
    <meta property="og:locale:alternate" content="en_US" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalURL} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
    <meta name="twitter:image:alt" content="Daybel Diaz - Ingeniero de Software" />
    <meta name="twitter:creator" content="@daybeldiaz" />
    <meta name="twitter:site" content="@daybeldiaz" />
    
    <!-- Additional SEO -->
    <meta name="robots" content="index, follow" />
    <meta name="language" content="Spanish" />
    <meta name="revisit-after" content="7 days" />
    <meta name="theme-color" content="#04BBE3" />
    
    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Daybel Diaz",
        "url": "https://daybeldiaz.dev",
        "image": "https://daybeldiaz.dev/profile.jpeg",
        "jobTitle": "Ingeniero de Software",
        "description": "Ingeniero de software especializado en Java, Spring Boot y desarrollo Full Stack con más de 2 años de experiencia",
        "email": "contacto@daybeldiaz.dev",
        "worksFor": {
          "@type": "Organization",
          "name": "BitBox Caribe SRL"
        },
        "alumniOf": {
          "@type": "Organization",
          "name": "Universidad Autónoma de Santo Domingo"
        },
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "DO",
          "addressLocality": "República Dominicana"
        },
        "nationality": {
          "@type": "Country",
          "name": "República Dominicana"
        },
        "knowsAbout": [
          "Java",
          "Spring Boot",
          "PostgreSQL",
          "React",
          "Full Stack Development",
          "Software Engineering",
          "Backend Development",
          "Frontend Development",
          "REST API",
          "Microservices"
        ],
        "knowsLanguage": [
          {
            "@type": "Language",
            "name": "Spanish",
            "alternateName": "es"
          },
          {
            "@type": "Language",
            "name": "English",
            "alternateName": "en"
          }
        ],
        "sameAs": [
          "https://github.com/daybeldiaz",
          "https://linkedin.com/in/daybeldiaz"
        ]
      }
    </script>
    
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Daybel Diaz - Portfolio",
        "url": "https://daybeldiaz.dev",
        "description": "Portfolio profesional de Daybel Diaz, Ingeniero de Software especializado en Java y Spring Boot",
        "inLanguage": "es",
        "author": {
          "@type": "Person",
          "name": "Daybel Diaz"
        }
      }
    </script>
  </head>
  <body class="relative bg-black overflow-x-hidden">
    <!-- Fondo estático más limpio -->
    <div class="fixed inset-0 -z-10">
      <!-- Gradiente base (sin animación) -->
      <div
        class="absolute inset-0 bg-gradient-to-br from-black via-shakespeare-950/10 to-black"
      >
      </div>

      <!-- Partículas flotantes (estas sí se mueven) -->
      <div
        class="absolute top-1/4 left-1/4 w-2 h-2 bg-shakespeare-400 rounded-full animate-particle-1"
      >
      </div>
      <div
        class="absolute top-1/3 right-1/3 w-1.5 h-1.5 bg-shakespeare-500 rounded-full animate-particle-2"
      >
      </div>
      <div
        class="absolute bottom-1/4 left-1/3 w-2.5 h-2.5 bg-shakespeare-300 rounded-full animate-particle-3"
      >
      </div>
      <div
        class="absolute top-2/3 right-1/4 w-1 h-1 bg-shakespeare-600 rounded-full animate-particle-4"
      >
      </div>
      <div
        class="absolute bottom-1/3 right-1/2 w-2 h-2 bg-shakespeare-400 rounded-full animate-particle-5"
      >
      </div>
      <div
        class="absolute top-1/2 left-1/2 w-1.5 h-1.5 bg-shakespeare-500 rounded-full animate-particle-6"
      >
      </div>

      <!-- Orbes de fondo con pulso suave -->
      <div
        class="absolute top-1/3 left-1/4 w-96 h-96 bg-shakespeare-500/8 rounded-full blur-[100px] animate-pulse-gentle"
      >
      </div>
      <div
        class="absolute bottom-1/3 right-1/4 w-80 h-80 bg-shakespeare-400/6 rounded-full blur-[100px] animate-pulse-gentle"
        style="animation-delay: 3s;"
      >
      </div>
    </div>

    <main
      class="text-shakespeare-300 pt-14 sm:pt-16 md:pt-18 lg:pt-0 relative z-0"
    >
      <SpeedInsights />
      <Analytics />
      <slot />
    </main>
  </body>
</html>

<style is:global>
  @media (prefers-reduced-motion: no-preference) {
    html {
      scroll-behavior: smooth;
    }

    /* Pulso suave para los orbes */
    @keyframes pulse-gentle {
      0%,
      100% {
        transform: scale(1);
        opacity: 0.6;
      }
      50% {
        transform: scale(1.1);
        opacity: 0.8;
      }
    }

    /* Movimientos suaves para las partículas */
    @keyframes particle-1 {
      0%,
      100% {
        transform: translate(0, 0);
        opacity: 0.3;
      }
      50% {
        transform: translate(100px, -150px);
        opacity: 0.8;
      }
    }

    @keyframes particle-2 {
      0%,
      100% {
        transform: translate(0, 0);
        opacity: 0.4;
      }
      50% {
        transform: translate(-120px, 100px);
        opacity: 0.9;
      }
    }

    @keyframes particle-3 {
      0%,
      100% {
        transform: translate(0, 0);
        opacity: 0.2;
      }
      50% {
        transform: translate(80px, 120px);
        opacity: 0.7;
      }
    }

    @keyframes particle-4 {
      0%,
      100% {
        transform: translate(0, 0);
        opacity: 0.5;
      }
      50% {
        transform: translate(-90px, -80px);
        opacity: 1;
      }
    }

    @keyframes particle-5 {
      0%,
      100% {
        transform: translate(0, 0);
        opacity: 0.3;
      }
      50% {
        transform: translate(110px, 90px);
        opacity: 0.8;
      }
    }

    @keyframes particle-6 {
      0%,
      100% {
        transform: translate(0, 0);
        opacity: 0.4;
      }
      50% {
        transform: translate(-70px, -100px);
        opacity: 0.7;
      }
    }

    .animate-pulse-gentle {
      animation: pulse-gentle 8s ease-in-out infinite;
    }

    .animate-particle-1 {
      animation: particle-1 15s ease-in-out infinite;
    }
    .animate-particle-2 {
      animation: particle-2 18s ease-in-out infinite;
    }
    .animate-particle-3 {
      animation: particle-3 20s ease-in-out infinite;
    }
    .animate-particle-4 {
      animation: particle-4 22s ease-in-out infinite;
    }
    .animate-particle-5 {
      animation: particle-5 17s ease-in-out infinite;
    }
    .animate-particle-6 {
      animation: particle-6 19s ease-in-out infinite;
    }
  }

  body {
    font-family: system-ui, sans-serif;
    margin: 0;
    padding: 0;
  }

  main {
    width: 100%;
    margin: 0 auto;
  }

  /* Scroll animations */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  .animate-on-scroll.animate-visible {
    opacity: 1;
    transform: translateY(0);
  }

  .animate-on-scroll.animate-delay-100 {
    transition-delay: 100ms;
  }
  .animate-on-scroll.animate-delay-200 {
    transition-delay: 200ms;
  }
  .animate-on-scroll.animate-delay-300 {
    transition-delay: 300ms;
  }
  .animate-on-scroll.animate-delay-400 {
    transition-delay: 400ms;
  }

  /* Fade in from left */
  .animate-fade-left {
    opacity: 0;
    transform: translateX(-30px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  .animate-fade-left.animate-visible {
    opacity: 1;
    transform: translateX(0);
  }

  /* Fade in from right */
  .animate-fade-right {
    opacity: 0;
    transform: translateX(30px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  .animate-fade-right.animate-visible {
    opacity: 1;
    transform: translateX(0);
  }

  /* Scale animation */
  .animate-scale {
    opacity: 0;
    transform: scale(0.95);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  .animate-scale.animate-visible {
    opacity: 1;
    transform: scale(1);
  }
</style>

<script>
  // Intersection Observer for scroll animations
  const observerOptions = {
    root: null,
    rootMargin: "0px 0px -50px 0px",
    threshold: 0.1,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("animate-visible");
        // Optionally unobserve after animation
        // observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  // Observe all elements with animation classes
  document.addEventListener("DOMContentLoaded", () => {
    const animatedElements = document.querySelectorAll(
      ".animate-on-scroll, .animate-fade-left, .animate-fade-right, .animate-scale",
    );
    animatedElements.forEach((el) => observer.observe(el));
  });

  // Also run on page load for Astro's view transitions
  document.addEventListener("astro:page-load", () => {
    const animatedElements = document.querySelectorAll(
      ".animate-on-scroll, .animate-fade-left, .animate-fade-right, .animate-scale",
    );
    animatedElements.forEach((el) => observer.observe(el));
  });
</script>
